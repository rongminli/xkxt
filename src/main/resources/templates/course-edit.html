<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="utf-8" />
    <title>教务系统-编辑课程</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta content="Premium Multipurpose Admin & Dashboard Template" name="description" />
    <meta content="" name="author" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    <!-- App favicon -->
    <link rel="shortcut icon" href="../assets/images/favicon.ico">

    <link href="../../plugins/jvectormap/jquery-jvectormap-2.0.2.css" rel="stylesheet">

    <!-- App css -->
    <link href="../assets/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
    <link href="../assets/css/jquery-ui.min.css" rel="stylesheet">
    <link href="../assets/css/icons.min.css" rel="stylesheet" type="text/css" />
    <link href="../assets/css/metisMenu.min.css" rel="stylesheet" type="text/css" />
    <link href="../assets/css/app.min.css" rel="stylesheet" type="text/css" />

</head>

<body>

<div th:replace="layout::topbar"></div>

<div th:replace="layout::left-sidenav"></div>

<div class="page-wrapper">
    <!-- Page Content-->
    <div class="page-content">
        <div class="container-fluid">

            <!-- Page-Title -->
            <div class="row">
                <div class="col-sm-12">
                    <div class="page-title-box">
                        <div class="float-right">
                            <ol class="breadcrumb">
                                <li class="breadcrumb-item"><a href="javascript:void(0);">主页</a></li>
                                <li class="breadcrumb-item active">编辑课程</li>
                            </ol>
                        </div>
                        <h4 class="page-title">编辑课程</h4>
                    </div><!--end page-title-box-->
                </div><!--end col-->
            </div>
            <!-- end page title end breadcrumb -->

            <div class="row">
                <div class="col-8">
                    <div class="card">
                        <div class="card-body">

                            <h4 class="mt-0 header-title">课程信息</h4>
                            <p class="text-muted mb-lg-3">课程详细信息。</p>


                            <div class="row">
                                <form class="form-horizontal form-material col-12" method="post" action="/course/edit">
                                    <input id="id" name="id" th:value="${course.id}" type="hidden">

                                    <div class="form-group row">
                                        <label for="name" class="col-sm-1 col-form-label text-right">课程名称</label>
                                        <div class="col-sm-10">
                                            <input class="col-sm-11 form-control" type="text" id="name" name="name" th:value="${course.name}">
                                        </div>
                                    </div>
                                    <div class="form-group row">
                                        <label for="teacher" class="col-sm-1 col-form-label text-right">任课教师</label>
                                        <div class="col-sm-10">
                                            <input class="col-sm-11 form-control" type="text" id="teacher" name="teacher" th:value="${course.teacher}">
                                        </div>
                                    </div>
                                    <div class="form-group row">
                                        <label for="start" class="col-sm-1 col-form-label text-right">开始时间</label>
                                        <div class="col-sm-10">
                                            <select class="form-control col-sm-11" id="start" name="start" th:value="${course.start}">
                                                <option value="0">未选择</option>
                                                <option value="1" th:selected="${course.start eq 1}">第1周</option>
                                                <option value="2" th:selected="${course.start eq 2}">第2周</option>
                                                <option value="3" th:selected="${course.start eq 3}">第3周</option>
                                                <option value="4" th:selected="${course.start eq 4}">第4周</option>
                                                <option value="5" th:selected="${course.start eq 5}">第5周</option>
                                                <option value="6" th:selected="${course.start eq 6}">第6周</option>
                                                <option value="7" th:selected="${course.start eq 7}">第7周</option>
                                                <option value="8" th:selected="${course.start eq 8}">第8周</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="form-group row">
                                        <label for="end" class="col-sm-1 col-form-label text-right">结束时间</label>
                                        <div class="col-sm-10">
                                            <select class="form-control col-sm-11" id="end" name="end" th:value="${course.end}">
                                                <option value="0">未选择</option>
                                                <option value="15" th:selected="${course.end eq 15}">第15周</option>
                                                <option value="14" th:selected="${course.end eq 14}">第14周</option>
                                                <option value="13" th:selected="${course.end eq 13}">第13周</option>
                                                <option value="12" th:selected="${course.end eq 12}">第12周</option>
                                                <option value="11" th:selected="${course.end eq 11}">第11周</option>
                                                <option value="10" th:selected="${course.end eq 10}">第10周</option>
                                                <option value="9" th:selected="${course.end eq 9}">第9周</option>
                                                <option value="8" th:selected="${course.end eq 8}">第8周</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <button class="btn btn-gradient-primary btn-sm px-4 mt-3 float-right mb-0" type="submit">更新课程</button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="row" th:if="${ course.id != null}">
                <div class="col-8">
                    <div class="card">
                        <div class="card-body">

                            <h4 class="mt-0 header-title">课程安排</h4>
                            <p class="text-muted mb-3">安排教室和上课时间。</p>

                            <span class="float-right">
                                <button id="but_add" class="btn btn-gradient-primary btn-sm px-4 mb-1" data-toggle="modal" data-target="#edit_course_rgt">添加</button>
                            </span><!--end table-->
                            <div class="table-responsive">
                                <table class="table mb-0 table-centered">
                                    <thead>
                                    <tr>
                                        <th>教室</th>
                                        <th>上课时间</th>
                                        <th class="editable-cancel">操作</th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    <tr th:each="courseRgt,state : ${courseRgts}">
                                        <td th:text="${courseRgt.classroom}"></td>
                                        <td th:text="${'周 ' + courseRgt.weekDay + ' 第 ' + courseRgt.start + ' 节到第 ' + courseRgt.end + ' 节'}"></td>
                                        <td>
                                            <a class="table-edt-btn mr-2" th:onclick="'javascript:loadData(\''+${state.index}+'\');'" data-toggle="modal" data-target="#edit_course_rgt"><i class="fas fa-edit text-info font-16"></i></a>
                                            <a href="#" th:href="@{'/courseRgt/del?courseId=' + ${course.id} + '&courseRgtId=' + ${courseRgt.id}} "><i class="fas fa-trash-alt text-danger font-16"></i></a>
                                        </td>
                                    </tr>
                                    </tbody>
                                </table><!--end /table-->
                            </div><!--end /tableresponsive-->
                        </div><!--end card-body-->
                    </div><!--end card-->
                </div><!--end col-->
            </div><!--end row-->

            <div th:replace="layout::footer"></div>


            <!-- 模态框（Modal） -->
            <div class="modal fade" id="edit_course_rgt" tabindex="-1" role="dialog" aria-labelledby="安排课程" aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content bg-white">
                        <div class="modal-header bg-white">
                            <h4 class="modal-title" id="myModalLabel">
                                安排课程
                            </h4>
                            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                                &times;
                            </button>
                        </div>
                        <div class="modal-body bg-white">
                            <div class="row">
                                <form id="course_rgt_edit" class="form-horizontal form-material col-12" method="post" th:action="@{/courseRgt/edit}">
                                    <input name="id" type="hidden">
                                    <input name="courseId" type="hidden" th:value="${course.id}">
                                    <div class="form-group row">
                                        <label for="teacher" class="col-sm-2 col-form-label text-right">教室</label>
                                        <div class="col-sm-10">
                                            <input class="col-sm-11 form-control" type="text" id="classroom" name="classroom">
                                        </div>
                                    </div>
                                    <div class="form-group row">
                                        <label for="teacher" class="col-sm-2 col-form-label text-right">周</label>
                                        <div class="col-sm-10">
                                            <select class="form-control col-sm-11" id="weekDay" name="weekDay">
                                                <option value="0">未选择</option>
                                                <option value="1">周一</option>
                                                <option value="2">周二</option>
                                                <option value="3">周三</option>
                                                <option value="4">周四</option>
                                                <option value="5">周五</option>
                                                <option value="6">周六</option>
                                                <option value="7">周日</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="form-group row">
                                        <label for="course_rgt_start" class="col-sm-2 col-form-label text-right">开始时间</label>
                                        <div class="col-sm-10">
                                            <select class="form-control col-sm-11" id="course_rgt_start" name="start">
                                                <option value="0">未选择</option>
                                                <option value="1">第1节</option>
                                                <option value="2">第2节</option>
                                                <option value="3">第3节</option>
                                                <option value="4">第4节</option>
                                                <option value="5">第5节</option>
                                                <option value="6">第6节</option>
                                                <option value="7">第7节</option>
                                                <option value="8">第8节</option>
                                                <option value="8">第9节</option>
                                                <option value="8">第10节</option>
                                                <option value="8">第11节</option>
                                                <option value="8">第12节</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="form-group row">
                                        <label for="course_rgt_end" class="col-sm-2 col-form-label text-right">结束时间</label>
                                        <div class="col-sm-10">
                                            <select class="form-control col-sm-11" id="course_rgt_end" name="end">
                                                <option value="0">未选择</option>
                                                <option value="1">第1节</option>
                                                <option value="2">第2节</option>
                                                <option value="3">第3节</option>
                                                <option value="4">第4节</option>
                                                <option value="5">第5节</option>
                                                <option value="6">第6节</option>
                                                <option value="7">第7节</option>
                                                <option value="8">第8节</option>
                                                <option value="8">第9节</option>
                                                <option value="8">第10节</option>
                                                <option value="8">第11节</option>
                                                <option value="8">第12节</option>
                                            </select>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>
                        <div class="modal-footer bg-white">
                            <button type="button" class="btn btn-default btn-sm" data-dismiss="modal">取消
                            </button>
                            <button type="button" class="btn btn-primary btn-sm px-4" id="course_rgt_edit_btn">
                                提交
                            </button>
                        </div>
                    </div><!-- /.modal-content -->
                </div><!-- /.modal -->
            </div>
        </div>
        </div>
        <!-- end page content -->
    </div>
    <!-- end page-wrapper -->

    <!-- jQuery  -->
    <script src="../assets/js/jquery.min.js" th:src="@{/assets/js/jquery.min.js}"></script>
    <script src="../assets/js/bootstrap.bundle.min.js" th:src="@{/assets/js/bootstrap.bundle.min.js}"></script>
    <script src="../assets/js/metismenu.min.js" th:src="@{/assets/js/metismenu.min.js}"></script>
    <script src="../assets/js/waves.js" th:src="@{/assets/js/waves.js}"></script>
    <script src="../assets/js/feather.min.js" th:src="@{/assets/js/feather.min.js}"></script>
    <script src="../assets/js/jquery.slimscroll.min.js" th:src="@{/assets/js/jquery.slimscroll.min.js}"></script>
    <script src="../assets/js/jquery-ui.min.js" th:src="@{/assets/js/jquery-ui.min.js}"></script>

    <script src="../../plugins/moment/moment.js" th:src="@{/plugins/moment/moment.js}"></script>
    <script src="../../plugins/apexcharts/apexcharts.min.js" th:src="@{/plugins/apexcharts/apexcharts.min.js}"></script>
    <script src="../../plugins/jvectormap/jquery-jvectormap-2.0.2.min.js" th:src="@{/plugins/jvectormap/jquery-jvectormap-2.0.2.min.js}"></script>
    <script src="../../plugins/jvectormap/jquery-jvectormap-world-mill-en.js" th:src="@{/plugins/jvectormap/jquery-jvectormap-world-mill-en.js}"></script>
    <script src="../../plugins/flot-chart/jquery.canvaswrapper.js" th:src="@{/plugins/flot-chart/jquery.canvaswrapper.js}"></script>
    <script src="../../plugins/flot-chart/jquery.colorhelpers.js" th:src="@{/plugins/flot-chart/jquery.colorhelpers.js}"></script>
    <script src="../../plugins/flot-chart/jquery.flot.js" th:src="@{/plugins/flot-chart/jquery.flot.js}"></script>
    <script src="../../plugins/flot-chart/jquery.flot.saturated.js" th:src="@{/plugins/flot-chart/jquery.flot.saturated.js}"></script>
    <script src="../../plugins/flot-chart/jquery.flot.browser.js" th:src="@{/plugins/flot-chart/jquery.flot.browser.js}"></script>
    <script src="../../plugins/flot-chart/jquery.flot.drawSeries.js" th:src="@{/plugins/flot-chart/jquery.flot.drawSeries.js}"></script>
    <script src="../../plugins/flot-chart/jquery.flot.uiConstants.js" th:src="@{/plugins/flot-chart/jquery.flot.uiConstants.js}"></script>
    <script src="../../plugins/flot-chart/jquery.flot-dataType.js" th:src="@{/plugins/flot-chart/jquery.flot-dataType.js}"></script>

    <!-- App js -->
    <script src="../assets/js/app.js" th:src="@{/assets/js/app.js}"></script>
    <script src="../assets/js/jquery.formHelper.js" th:src="@{/assets/js/jquery.formHelper.js}"></script>

    <script th:inline="javascript">
        const course = [[${course}]];
        const courseRgts = [[${courseRgts}]];

        function loadData(index){
            $(course_rgt_edit).setForm(courseRgts[index]);
        };

        $(function(){
            $(course_rgt_edit_btn).click( _ => {
                $(course_rgt_edit).submit();
            });
        });



    </script>
</body>

</html>